var Bt=Object.defineProperty;var Ve=e=>{throw TypeError(e)};var Vt=(e,t,r)=>t in e?Bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var je=(e,t,r)=>Vt(e,typeof t!="symbol"?t+"":t,r),Ke=(e,t,r)=>t.has(e)||Ve("Cannot "+r);var $=(e,t,r)=>(Ke(e,t,"read from private field"),r?r.call(e):t.get(e)),L=(e,t,r)=>t.has(e)?Ve("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),D=(e,t,r,s)=>(Ke(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import{b as V,a as ne,o as Kt,r as Xt,p as yt,s as Qt,c as Xe,d as Yt,e as Zt,f as Qe,g as er,h as tr,i as rr,j as sr}from"./chunks/internal.js";import{m as nr,d as gt,n as We,a as wt,r as Ye,h as ar,s as or,b as ir,c as cr}from"./chunks/exports.js";import*as J from"devalue";import{w as Ze,r as lr}from"./chunks/index.js";import{parse as Se,serialize as Ne}from"cookie";import*as et from"set-cookie-parser";const Ue=!1,ur="/_svelte_kit_assets",$t=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],dr=["GET","POST","HEAD"];function Me(e,t){const r=[];e.split(",").forEach((a,o)=>{const c=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(a);if(c){const[,d,l,u="1"]=c;r.push({type:d,subtype:l,q:+u,i:o})}}),r.sort((a,o)=>a.q!==o.q?o.q-a.q:a.subtype==="*"!=(o.subtype==="*")?a.subtype==="*"?1:-1:a.type==="*"!=(o.type==="*")?a.type==="*"?1:-1:a.i-o.i);let s,n=1/0;for(const a of t){const[o,c]=a.split("/"),d=r.findIndex(l=>(l.type===o||l.type==="*")&&(l.subtype===c||l.subtype==="*"));d!==-1&&d<n&&(s=a,n=d)}return s}function fr(e,...t){var s,n;const r=(n=(s=e.headers.get("content-type"))==null?void 0:s.split(";",1)[0].trim())!=null?n:"";return t.includes(r.toLowerCase())}function bt(e){return fr(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}class Ee{constructor(t,r){this.status=t,typeof r=="string"?this.body={message:r}:r?this.body=r:this.body={message:`Error: ${t}`}}toString(){return JSON.stringify(this.body)}}class ee{constructor(t,r){this.status=t,this.location=r}}class se extends Error{constructor(t,r,s){super(s),this.status=t,this.text=r}}class Fe{constructor(t,r){this.status=t,this.data=r}}function Ge(e,t){const r=JSON.stringify(e),s=new Headers(t==null?void 0:t.headers);return s.has("content-length")||s.set("content-length",kt.encode(r).byteLength.toString()),s.has("content-type")||s.set("content-type","application/json"),new Response(r,{...t,headers:s})}const kt=new TextEncoder;function F(e,t){const r=new Headers(t==null?void 0:t.headers);if(!r.has("content-length")){const s=kt.encode(e);return r.set("content-length",s.byteLength.toString()),new Response(s,{...t,headers:r})}return new Response(e,{...t,headers:r})}function hr(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function we(e){return e instanceof Ee||e instanceof se?e.status:500}function pr(e){return e instanceof se?e.text:"Internal Error"}const xt={"&":"&amp;",'"':"&quot;"},vt={"&":"&amp;","<":"&lt;"},Et="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",_r=new RegExp(`[${Object.keys(xt).join("")}]|`+Et,"g"),mr=new RegExp(`[${Object.keys(vt).join("")}]|`+Et,"g");function Je(e,t){const r=t?xt:vt;return e.replace(t?_r:mr,n=>{var a;return n.length===2?n:(a=r[n])!=null?a:`&#${n.charCodeAt(0)};`})}function jt(e,t){return F(`${t} method not allowed`,{status:405,headers:{allow:yr(e).join(", ")}})}function yr(e){const t=$t.filter(r=>r in e);return("GET"in e||"HEAD"in e)&&t.push("HEAD"),t}function Oe(e,t,r){let s=e.templates.error({status:t,message:Je(r)});return F(s,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function tt(e,t,r){r=r instanceof Ee?r:hr(r);const s=we(r),n=await B(e,t,r),a=Me(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||a==="application/json"?Ge(n,{status:s}):Oe(t,s,n.message)}async function B(e,t,r){var a;if(r instanceof Ee)return r.body;const s=we(r),n=pr(r);return(a=await t.hooks.handleError({error:r,event:e,status:s,message:n}))!=null?a:{message:n}}function Te(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function St(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (data${t.path})`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function Rt(e){var r,s,n;const t=[];return e.uses&&e.uses.dependencies.size>0&&t.push(`"dependencies":${JSON.stringify(Array.from(e.uses.dependencies))}`),e.uses&&e.uses.search_params.size>0&&t.push(`"search_params":${JSON.stringify(Array.from(e.uses.search_params))}`),e.uses&&e.uses.params.size>0&&t.push(`"params":${JSON.stringify(Array.from(e.uses.params))}`),(r=e.uses)!=null&&r.parent&&t.push('"parent":1'),(s=e.uses)!=null&&s.route&&t.push('"route":1'),(n=e.uses)!=null&&n.url&&t.push('"url":1'),`"uses":{${t.join(",")}}`}async function gr(e,t,r){var o;const s=e.request.method;let n=t[s]||t.fallback;if(s==="HEAD"&&t.GET&&!t.HEAD&&(n=t.GET),!n)return jt(t,s);const a=(o=t.prerender)!=null?o:r.prerender_default;if(a&&(t.POST||t.PATCH||t.PUT||t.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(r.prerendering&&!a){if(r.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}try{let c=await n(e);if(!(c instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);return r.prerendering&&(c=new Response(c.body,{status:c.status,statusText:c.statusText,headers:new Headers(c.headers)}),c.headers.set("x-sveltekit-prerender",String(a))),c}catch(c){if(c instanceof ee)return new Response(void 0,{status:c.status,headers:{location:c.location}});throw c}}function wr(e){var n;const{method:t,headers:r}=e.request;if($t.includes(t)&&!dr.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const s=(n=e.request.headers.get("accept"))!=null?n:"*/*";return Me(s,["*","text/html"])!=="text/html"}function rt(e){return e.filter(t=>t!=null)}function Ot(e){var r;return Me((r=e.request.headers.get("accept"))!=null?r:"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function $r(e,t,r){const s=r==null?void 0:r.actions;if(!s){const n=new se(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return ke({type:"error",error:await B(e,t,n)},{status:n.status,headers:{allow:"GET"}})}qt(s);try{const n=await Pt(e,s);return n instanceof Fe?ke({type:"failure",status:n.status,data:st(n.data,e.route.id,t.hooks.transport)}):ke({type:"success",status:n?200:204,data:st(n,e.route.id,t.hooks.transport)})}catch(n){const a=n;return a instanceof ee?At(a):ke({type:"error",error:await B(e,t,Tt(a))},{status:we(a)})}}function Tt(e){return e instanceof Fe?new Error('Cannot "throw fail()". Use "return fail()"'):e}function At(e){return ke({type:"redirect",status:e.status,location:e.location})}function ke(e,t){return Ge(e,t)}function br(e){return e.request.method==="POST"}async function kr(e,t){const r=t==null?void 0:t.actions;if(!r)return e.setHeaders({allow:"GET"}),{type:"error",error:new se(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};qt(r);try{const s=await Pt(e,r);return s instanceof Fe?{type:"failure",status:s.status,data:s.data}:{type:"success",status:200,data:s}}catch(s){const n=s;return n instanceof ee?{type:"redirect",status:n.status,location:n.location}:{type:"error",error:Tt(n)}}}function qt(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function Pt(e,t){const r=new URL(e.request.url);let s="default";for(const a of r.searchParams)if(a[0].startsWith("/")){if(s=a[0].slice(1),s==="default")throw new Error('Cannot use reserved action name "default"');break}const n=t[s];if(!n)throw new se(404,"Not Found",`No action with name '${s}' found`);if(!bt(e.request))throw new se(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return n(e)}function xr(e,t,r){const s=n=>{for(const a in r){const o=r[a].encode(n);if(o)return`app.decode('${a}', ${J.uneval(o,s)})`}};return Ct(e,n=>J.uneval(n,s),t)}function st(e,t,r){const s=Object.fromEntries(Object.entries(r).map(([n,a])=>[n,a.encode]));return Ct(e,n=>J.stringify(n,s),t)}function Ct(e,t,r){try{return t(e)}catch(s){const n=s;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in n){let a=`Data returned from action inside ${r} is not serializable: ${n.message}`;throw n.path!==""&&(a+=` (data.${n.path})`),new Error(a)}throw n}}const nt="x-sveltekit-invalidated",at="x-sveltekit-trailing-slash";function vr(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");const t=new Uint8Array(new Uint16Array([1]).buffer)[0]>0;return btoa(new TextDecoder(t?"utf-16le":"utf-16be").decode(new Uint16Array(new Uint8Array(e))))}async function Be({event:e,state:t,node:r,parent:s}){var d;if(!(r!=null&&r.server))return null;let n=!0;const a={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},o=nr(e.url,()=>{n&&(a.url=!0)},l=>{n&&a.search_params.add(l)});t.prerendering&&gt(o);const c=await((d=r.server.load)==null?void 0:d.call(null,{...e,fetch:(l,u)=>(new URL(l instanceof Request?l.url:l,e.url),e.fetch(l,u)),depends:(...l)=>{for(const u of l){const{href:i}=new URL(u,e.url);a.dependencies.add(i)}},params:new Proxy(e.params,{get:(l,u)=>(n&&a.params.add(u),l[u])}),parent:async()=>(n&&(a.parent=!0),s()),route:new Proxy(e.route,{get:(l,u)=>(n&&(a.route=!0),l[u])}),url:o,untrack(l){n=!1;try{return l()}finally{n=!0}}}));return{type:"data",data:c!=null?c:null,uses:a,slash:r.server.trailingSlash}}async function Ht({event:e,fetched:t,node:r,parent:s,server_data_promise:n,state:a,resolve_opts:o,csr:c}){var u,i,h;const d=await n;if(!((u=r==null?void 0:r.universal)!=null&&u.load))return(i=d==null?void 0:d.data)!=null?i:null;const l=await r.universal.load.call(null,{url:e.url,params:e.params,data:(h=d==null?void 0:d.data)!=null?h:null,route:e.route,fetch:Er(e,a,t,c,o),setHeaders:e.setHeaders,depends:()=>{},parent:s,untrack:_=>_()});return l!=null?l:null}function Er(e,t,r,s,n){const a=async(o,c)=>{var y;const d=o instanceof Request&&o.body?o.clone().body:null,l=o instanceof Request&&[...o.headers].length?new Headers(o.headers):c==null?void 0:c.headers;let u=await e.fetch(o,c);const i=new URL(o instanceof Request?o.url:o,e.url),h=i.origin===e.url.origin;let _;if(h)t.prerendering&&(_={response:u,body:null},t.prerendering.dependencies.set(i.pathname,_));else if((o instanceof Request?o.mode:(y=c==null?void 0:c.mode)!=null?y:"cors")==="no-cors")u=new Response("",{status:u.status,statusText:u.statusText,headers:u.headers});else{const g=u.headers.get("access-control-allow-origin");if(!g||g!==e.url.origin&&g!=="*")throw new Error(`CORS error: ${g?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}const f=new Proxy(u,{get(m,g,S){async function j(O,q){const I=Number(m.status);if(isNaN(I))throw new Error(`response.status is not a number. value: "${m.status}" type: ${typeof m.status}`);r.push({url:h?i.href.slice(e.url.origin.length):i.href,method:e.request.method,request_body:o instanceof Request&&d?await jr(d):c==null?void 0:c.body,request_headers:l,response_body:O,response:m,is_b64:q})}if(g==="arrayBuffer")return async()=>{const O=await m.arrayBuffer();return _&&(_.body=new Uint8Array(O)),O instanceof ArrayBuffer&&await j(vr(O),!0),O};async function v(){const O=await m.text();return(!O||typeof O=="string")&&await j(O,!1),_&&(_.body=O),O}return g==="text"?v:g==="json"?async()=>JSON.parse(await v()):Reflect.get(m,g,m)}});if(s){const m=u.headers.get;u.headers.get=g=>{const S=g.toLowerCase(),j=m.call(u.headers,S);if(j&&!S.startsWith("x-sveltekit-")&&!n.filterSerializedResponseHeaders(S,j))throw new Error(`Failed to get response header "${S}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return j}}return f};return(o,c)=>{const d=a(o,c);return d.catch(()=>{}),d}}async function jr(e){let t="";const r=e.getReader(),s=new TextDecoder;for(;;){const{done:n,value:a}=await r.read();if(n)break;t+=s.decode(a)}return t}function Nt(...e){let t=5381;for(const r of e)if(typeof r=="string"){let s=r.length;for(;s;)t=t*33^r.charCodeAt(--s)}else if(ArrayBuffer.isView(r)){const s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=s.length;for(;n;)t=t*33^s[--n]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const Ut={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Sr=new RegExp(`[${Object.keys(Ut).join("")}]`,"g");function Rr(e,t,r=!1){var u;const s={};let n=null,a=null,o=!1;for(const[i,h]of e.response.headers)t(i,h)&&(s[i]=h),i==="cache-control"?n=h:i==="age"?a=h:i==="vary"&&h.trim()==="*"&&(o=!0);const c={status:e.response.status,statusText:e.response.statusText,headers:s,body:e.response_body},d=JSON.stringify(c).replace(Sr,i=>Ut[i]),l=['type="application/json"',"data-sveltekit-fetched",`data-url="${Je(e.url,!0)}"`];if(e.is_b64&&l.push("data-b64"),e.request_headers||e.request_body){const i=[];e.request_headers&&i.push([...new Headers(e.request_headers)].join(",")),e.request_body&&i.push(e.request_body),l.push(`data-hash="${Nt(...i)}"`)}if(!r&&e.method==="GET"&&n&&!o){const i=(u=/s-maxage=(\d+)/g.exec(n))!=null?u:/max-age=(\d+)/g.exec(n);if(i){const h=+i[1]-+(a!=null?a:"0");l.push(`data-ttl="${h}"`)}}return`<script ${l.join(" ")}>${d}<\/script>`}const Q=JSON.stringify,Or=new TextEncoder;function ot(e){ze[0]||Tr();const t=zt.slice(0),r=Ar(e);for(let n=0;n<r.length;n+=16){const a=r.subarray(n,n+16);let o,c,d,l=t[0],u=t[1],i=t[2],h=t[3],_=t[4],f=t[5],y=t[6],m=t[7];for(let g=0;g<64;g++)g<16?o=a[g]:(c=a[g+1&15],d=a[g+14&15],o=a[g&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+a[g&15]+a[g+9&15]|0),o=o+m+(_>>>6^_>>>11^_>>>25^_<<26^_<<21^_<<7)+(y^_&(f^y))+ze[g],m=y,y=f,f=_,_=h+o|0,h=i,i=u,u=l,l=o+(u&i^h&(u^i))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;t[0]=t[0]+l|0,t[1]=t[1]+u|0,t[2]=t[2]+i|0,t[3]=t[3]+h|0,t[4]=t[4]+_|0,t[5]=t[5]+f|0,t[6]=t[6]+y|0,t[7]=t[7]+m|0}const s=new Uint8Array(t.buffer);return Lt(s),Dt(s)}const zt=new Uint32Array(8),ze=new Uint32Array(64);function Tr(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let s=!0;for(let n=2;n*n<=t;n++)if(t%n===0){s=!1;break}s&&(r<8&&(zt[r]=e(t**(1/2))),ze[r]=e(t**(1/3)),r++)}}function Lt(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function Ar(e){const t=Or.encode(e),r=t.length*8,s=512*Math.ceil((r+65)/512),n=new Uint8Array(s/8);n.set(t),n[t.length]=128,Lt(n);const a=new Uint32Array(n.buffer);return a[a.length-2]=Math.floor(r/4294967296),a[a.length-1]=r,a}const Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");function Dt(e){const t=e.length;let r="",s;for(s=2;s<t;s+=3)r+=Y[e[s-2]>>2],r+=Y[(e[s-2]&3)<<4|e[s-1]>>4],r+=Y[(e[s-1]&15)<<2|e[s]>>6],r+=Y[e[s]&63];return s===t+1&&(r+=Y[e[s-2]>>2],r+=Y[(e[s-2]&3)<<4],r+="=="),s===t&&(r+=Y[e[s-2]>>2],r+=Y[(e[s-2]&3)<<4|e[s-1]>>4],r+=Y[(e[s-1]&15)<<2],r+="="),r}const it=new Uint8Array(16);function qr(){return crypto.getRandomValues(it),Dt(it)}const Pr=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),Cr=/^(nonce|sha\d\d\d)-/;var te,de,fe,he,pe,_e,me,ye,ae,oe,ie,ce,le,Z,ge;class It{constructor(t,r,s){L(this,te);L(this,de);L(this,fe);L(this,he);L(this,pe);L(this,_e);L(this,me);L(this,ye);L(this,ae);L(this,oe);L(this,ie);L(this,ce);L(this,le);L(this,Z);L(this,ge);D(this,te,t),D(this,ae,r);const n=$(this,ae);D(this,oe,[]),D(this,ie,[]),D(this,ce,[]),D(this,le,[]),D(this,Z,[]);const a=n["script-src"]||n["default-src"],o=n["script-src-elem"],c=n["style-src"]||n["default-src"],d=n["style-src-attr"],l=n["style-src-elem"],u=i=>!!i&&!i.some(h=>h==="unsafe-inline");D(this,fe,u(a)),D(this,he,u(o)),D(this,_e,u(c)),D(this,me,u(d)),D(this,ye,u(l)),D(this,de,$(this,fe)||$(this,he)),D(this,pe,$(this,_e)||$(this,me)||$(this,ye)),this.script_needs_nonce=$(this,de)&&!$(this,te),this.style_needs_nonce=$(this,pe)&&!$(this,te),D(this,ge,s)}add_script(t){if(!$(this,de))return;const r=$(this,te)?`sha256-${ot(t)}`:`nonce-${$(this,ge)}`;$(this,fe)&&$(this,oe).push(r),$(this,he)&&$(this,ie).push(r)}add_style(t){if(!$(this,pe))return;const r=$(this,te)?`sha256-${ot(t)}`:`nonce-${$(this,ge)}`;if($(this,_e)&&$(this,ce).push(r),$(this,me)&&$(this,le).push(r),$(this,ye)){const s="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",n=$(this,ae);n["style-src-elem"]&&!n["style-src-elem"].includes(s)&&!$(this,Z).includes(s)&&$(this,Z).push(s),r!==s&&$(this,Z).push(r)}}get_header(t=!1){const r=[],s={...$(this,ae)};$(this,ce).length>0&&(s["style-src"]=[...s["style-src"]||s["default-src"]||[],...$(this,ce)]),$(this,le).length>0&&(s["style-src-attr"]=[...s["style-src-attr"]||[],...$(this,le)]),$(this,Z).length>0&&(s["style-src-elem"]=[...s["style-src-elem"]||[],...$(this,Z)]),$(this,oe).length>0&&(s["script-src"]=[...s["script-src"]||s["default-src"]||[],...$(this,oe)]),$(this,ie).length>0&&(s["script-src-elem"]=[...s["script-src-elem"]||[],...$(this,ie)]);for(const n in s){if(t&&(n==="frame-ancestors"||n==="report-uri"||n==="sandbox"))continue;const a=s[n];if(!a)continue;const o=[n];Array.isArray(a)&&a.forEach(c=>{Pr.has(c)||Cr.test(c)?o.push(`'${c}'`):o.push(c)}),r.push(o.join(" "))}return r.join("; ")}}te=new WeakMap,de=new WeakMap,fe=new WeakMap,he=new WeakMap,pe=new WeakMap,_e=new WeakMap,me=new WeakMap,ye=new WeakMap,ae=new WeakMap,oe=new WeakMap,ie=new WeakMap,ce=new WeakMap,le=new WeakMap,Z=new WeakMap,ge=new WeakMap;class Hr extends It{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content="${Je(t,!0)}">`}}class Nr extends It{constructor(t,r,s){var n,a,o,c;if(super(t,r,s),Object.values(r).filter(d=>!!d).length>0){const d=(a=(n=r["report-to"])==null?void 0:n.length)!=null?a:!1,l=(c=(o=r["report-uri"])==null?void 0:o.length)!=null?c:!1;if(!d&&!l)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Ur{constructor({mode:t,directives:r,reportOnly:s},{prerender:n}){je(this,"nonce",qr());je(this,"csp_provider");je(this,"report_only_provider");const a=t==="hash"||t==="auto"&&n;this.csp_provider=new Hr(a,r,this.nonce),this.report_only_provider=new Nr(a,s,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function ct(){let e,t;return{promise:new Promise((s,n)=>{e=s,t=n}),fulfil:e,reject:t}}function Wt(){const e=[ct()];return{iterator:{[Symbol.asyncIterator](){return{next:async()=>{const t=await e[0].promise;return t.done||e.shift(),t}}}},push:t=>{e[e.length-1].fulfil({value:t,done:!1}),e.push(ct())},done:()=>{e[e.length-1].fulfil({done:!0})}}}const zr={...lr(!1),check:()=>!1},lt=new TextEncoder;async function xe({branch:e,fetched:t,options:r,manifest:s,state:n,page_config:a,status:o,error:c=null,event:d,resolve_opts:l,action_result:u}){var N,W,M;if(n.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:i}=s._,h=new Set(i.imports),_=new Set(i.stylesheets),f=new Set(i.fonts),y=new Set,m=new Map;let g;const S=((u==null?void 0:u.type)==="success"||(u==null?void 0:u.type)==="failure")&&(N=u.data)!=null?N:null;let j=V,v=ne,O=Q(V);if((W=n.prerendering)!=null&&W.fallback?r.hash_routing&&(O="new URL('.', location).pathname.slice(0, -1)"):(j=d.url.pathname.slice(V.length).split("/").slice(2).map(()=>"..").join("/")||".",O=`new URL(${Q(j)}, location).pathname.slice(0, -1)`,(!ne||ne[0]==="/"&&ne!==ur)&&(v=j)),a.ssr){const p={stores:{page:Ze(null),navigating:Ze(null),updated:zr},constructors:await Promise.all(e.map(({node:E})=>E.component())),form:S};let k={};for(let E=0;E<e.length;E+=1)k={...k,...e[E].data},p[`data_${E}`]=k;p.page={error:c,params:d.params,route:d.route,status:o,url:d.url,data:k,form:S,state:{}},Kt({base:j,assets:v});const x={context:new Map([["__request__",{page:p.page}]])};try{g=r.root.render(p,x)}finally{Xt()}for(const{node:E}of e){for(const U of E.imports)h.add(U);for(const U of E.stylesheets)_.add(U);for(const U of E.fonts)f.add(U);E.inline_styles&&!i.inline&&Object.entries(await E.inline_styles()).forEach(([U,ue])=>m.set(U,ue))}}else g={head:"",html:"",css:{code:"",map:null}};let q="",I=g.html;const z=new Ur(r.csp,{prerender:!!n.prerendering}),w=p=>p.startsWith("/")?V+p:`${v}/${p}`,C=i.inline?(M=i.inline)==null?void 0:M.style:Array.from(m.values()).join(`
`);if(C){const p=[];z.style_needs_nonce&&p.push(` nonce="${z.nonce}"`),z.add_style(C),q+=`
	<style${p.join("")}>${C}</style>`}for(const p of _){const k=w(p),x=['rel="stylesheet"'];if(m.has(p))x.push("disabled",'media="(max-width: 0)"');else if(l.preload({type:"css",path:k})){const E=['rel="preload"','as="style"'];y.add(`<${encodeURI(k)}>; ${E.join(";")}; nopush`)}q+=`
		<link href="${k}" ${x.join(" ")}>`}for(const p of f){const k=w(p);if(l.preload({type:"font",path:k})){const E=['rel="preload"','as="font"',`type="font/${p.slice(p.lastIndexOf(".")+1)}"`,`href="${k}"`,"crossorigin"];q+=`
		<link ${E.join(" ")}>`}}const R=`__sveltekit_${r.version_hash}`,{data:P,chunks:A}=Lr(d,r,e.map(p=>p.server_data),z,R);if(a.ssr&&a.csr&&(I+=`
			${t.map(p=>Rr(p,l.filterSerializedResponseHeaders,!!n.prerendering)).join(`
			`)}`),a.csr){if(i.uses_env_dynamic_public&&n.prerendering&&h.add(`${r.app_dir}/env.js`),!i.inline){const K=Array.from(h,G=>w(G)).filter(G=>l.preload({type:"js",path:G}));for(const G of K)y.add(`<${encodeURI(G)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?q+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${G}">`:n.prerendering&&(q+=`
		<link rel="modulepreload" href="${G}">`)}const p=[],k=i.uses_env_dynamic_public&&n.prerendering,x=[`base: ${O}`];ne&&x.push(`assets: ${Q(ne)}`),i.uses_env_dynamic_public&&x.push(`env: ${k?"null":Q(yt)}`),A&&(p.push("const deferred = new Map();"),x.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`),x.push(`resolve: ({ id, data, error }) => {
							const try_to_resolve = () => {
								if (!deferred.has(id)) {
									setTimeout(try_to_resolve, 0);
									return;
								}
								const { fulfil, reject } = deferred.get(id);
								deferred.delete(id);
								if (error) reject(error);
								else fulfil(data);
							}
							try_to_resolve();
						}`)),p.push(`${R} = {
						${x.join(`,
						`)}
					};`);const E=["element"];if(p.push("const element = document.currentScript.parentElement;"),a.ssr){const K={form:"null",error:"null"};S&&(K.form=xr(S,d.route.id,r.hooks.transport)),c&&(K.error=J.uneval(c));const G=[`node_ids: [${e.map(({node:Jt})=>Jt.index).join(", ")}]`,`data: ${P}`,`form: ${K.form}`,`error: ${K.error}`];o!==200&&G.push(`status: ${o}`),r.embedded&&G.push(`params: ${J.uneval(d.params)}`,`route: ${Q(d.route)}`);const Ae="	".repeat(k?7:6);E.push(`{
${Ae}	${G.join(`,
${Ae}	`)}
${Ae}}`)}const U=i.inline?`${i.inline.script}

					__sveltekit_${r.version_hash}.app.start(${E.join(", ")});`:i.app?`Promise.all([
						import(${Q(w(i.start))}),
						import(${Q(w(i.app))})
					]).then(([kit, app]) => {
						kit.start(app, ${E.join(", ")});
					});`:`import(${Q(w(i.start))}).then((app) => {
						app.start(${E.join(", ")})
					});`;k?p.push(`import(${Q(`${j}/${r.app_dir}/env.js`)}).then(({ env }) => {
						${R}.env = env;

						${U.replace(/\n/g,`
	`)}
					});`):p.push(U),r.service_worker&&p.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${w("service-worker.js")}');
						});
					}`);const ue=`
				{
					${p.join(`

					`)}
				}
			`;z.add_script(ue),I+=`
			<script${z.script_needs_nonce?` nonce="${z.nonce}"`:""}>${ue}<\/script>
		`}const H=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(n.prerendering){const p=[],k=z.csp_provider.get_meta();k&&p.push(k),n.prerendering.cache&&p.push(`<meta http-equiv="cache-control" content="${n.prerendering.cache}">`),p.length>0&&(q=p.join(`
`)+q)}else{const p=z.csp_provider.get_header();p&&H.set("content-security-policy",p);const k=z.report_only_provider.get_header();k&&H.set("content-security-policy-report-only",k),y.size&&H.set("link",Array.from(y).join(", "))}q+=g.head;const b=r.templates.app({head:q,body:I,assets:v,nonce:z.nonce,env:Qt}),T=await l.transformPageChunk({html:b,done:!0})||"";return A||H.set("etag",`"${Nt(T)}"`),A?new Response(new ReadableStream({async start(p){p.enqueue(lt.encode(T+`
`));for await(const k of A)p.enqueue(lt.encode(k));p.close()},type:"bytes"}),{headers:H}):F(T,{status:o,headers:H})}function Lr(e,t,r,s,n){let a=1,o=0;const{iterator:c,push:d,done:l}=Wt();function u(i){if(typeof(i==null?void 0:i.then)=="function"){const h=a++;return o+=1,i.then(_=>({data:_})).catch(async _=>({error:await B(e,t,_)})).then(async({data:_,error:f})=>{o-=1;let y;try{y=J.uneval({id:h,data:_,error:f},u)}catch{f=await B(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),_=void 0,y=J.uneval({id:h,data:_,error:f},u)}const m=s.script_needs_nonce?` nonce="${s.nonce}"`:"";d(`<script${m}>${n}.resolve(${y})<\/script>
`),o===0&&l()}),`${n}.defer(${h})`}else for(const h in t.hooks.transport){const _=t.hooks.transport[h].encode(i);if(_)return`app.decode('${h}', ${J.uneval(_,u)})`}}try{return{data:`[${r.map(h=>h?`{"type":"data","data":${J.uneval(h.data,u)},${Rt(h)}${h.slash?`,"slash":${JSON.stringify(h.slash)}`:""}}`:"null").join(",")}]`,chunks:o>0?c:null}}catch(i){throw new Error(St(e,i))}}function X(e,t){return e.reduce((r,s)=>{var n,a,o,c;return(c=(o=(n=s==null?void 0:s.universal)==null?void 0:n[t])!=null?o:(a=s==null?void 0:s.server)==null?void 0:a[t])!=null?c:r},void 0)}async function Mt({event:e,options:t,manifest:r,state:s,status:n,error:a,resolve_opts:o}){var d,l;if(e.request.headers.get("x-sveltekit-error"))return Oe(t,n,a.message);const c=[];try{const u=[],i=await r._.nodes[0](),h=(d=X([i],"ssr"))!=null?d:!0,_=(l=X([i],"csr"))!=null?l:!0;if(h){s.error=!0;const f=Be({event:e,state:s,node:i,parent:async()=>({})}),y=await f,m=await Ht({event:e,fetched:c,node:i,parent:async()=>({}),resolve_opts:o,server_data_promise:f,state:s,csr:_});u.push({node:i,server_data:y,data:m},{node:await r._.nodes[1](),data:null,server_data:null})}return await xe({options:t,manifest:r,state:s,page_config:{ssr:h,csr:_},status:n,error:await B(e,t,a),branch:u,fetched:c,event:e,resolve_opts:o})}catch(u){return u instanceof ee?Te(u.status,u.location):Oe(t,we(u),(await B(e,t,u)).message)}}function Dr(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}const ut=new TextEncoder;async function Ir(e,t,r,s,n,a,o){if(!t.page)return new Response(void 0,{status:404});try{const c=[...t.page.layouts,t.page.leaf],d=a!=null?a:c.map(()=>!0);let l=!1;const u=new URL(e.url);u.pathname=We(u.pathname,o);const i={...e,url:u},h=c.map((S,j)=>Dr(async()=>{try{if(l)return{type:"skip"};const v=S==null?S:await s._.nodes[S]();return Be({event:i,state:n,node:v,parent:async()=>{const O={};for(let q=0;q<j;q+=1){const I=await h[q]();I&&Object.assign(O,I.data)}return O}})}catch(v){throw l=!0,v}})),_=h.map(async(S,j)=>d[j]?S():{type:"skip"});let f=_.length;const y=await Promise.all(_.map((S,j)=>S.catch(async v=>{if(v instanceof ee)throw v;return f=Math.min(f,j+1),{type:"error",error:await B(e,r,v),status:v instanceof Ee||v instanceof se?v.status:void 0}}))),{data:m,chunks:g}=Ft(e,r,y);return g?new Response(new ReadableStream({async start(S){S.enqueue(ut.encode(m));for await(const j of g)S.enqueue(ut.encode(j));S.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):Le(m)}catch(c){const d=c;return d instanceof ee?De(d):Le(await B(e,r,d),500)}}function Le(e,t=200){return F(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function De(e){return Le({type:"redirect",location:e.location})}function Ft(e,t,r){let s=1,n=0;const{iterator:a,push:o,done:c}=Wt(),d={...Object.fromEntries(Object.entries(t.hooks.transport).map(([l,u])=>[l,u.encode])),Promise:l=>{if(typeof(l==null?void 0:l.then)=="function"){const u=s++;n+=1;let i="data";return l.catch(async h=>(i="error",B(e,t,h))).then(async h=>{let _;try{_=J.stringify(h,d)}catch{const f=await B(e,t,new Error(`Failed to serialize promise while rendering ${e.route.id}`));i="error",_=J.stringify(f,d)}n-=1,o(`{"type":"chunk","id":${u},"${i}":${_}}
`),n===0&&c()}),u}}};try{return{data:`{"type":"data","nodes":[${r.map(u=>u?u.type==="error"||u.type==="skip"?JSON.stringify(u):`{"type":"data","data":${J.stringify(u.data,d)},${Rt(u)}${u.slash?`,"slash":${JSON.stringify(u.slash)}`:""}}`:"null").join(",")}]}
`,chunks:n>0?a:null}}catch(l){throw new Error(St(e,l))}}function Ie(e,t){return Promise.all([...e.layouts.map(r=>r==null?r:t._.nodes[r]()),t._.nodes[e.leaf]()])}const Wr=10;async function Mr(e,t,r,s,n,a){var o,c,d,l,u;if(n.depth>Wr)return F(`Not found: ${e.url.pathname}`,{status:404});if(Ot(e)){const i=await s._.nodes[t.leaf]();return $r(e,r,i==null?void 0:i.server)}try{const i=await Ie(t,s),h=i.at(-1);let _=200,f;if(br(e)){if(f=await kr(e,h.server),(f==null?void 0:f.type)==="redirect")return Te(f.status,f.location);(f==null?void 0:f.type)==="error"&&(_=we(f.error)),(f==null?void 0:f.type)==="failure"&&(_=f.status)}const y=i.some(w=>{var C,R;return((C=w==null?void 0:w.server)==null?void 0:C.load)||((R=w==null?void 0:w.server)==null?void 0:R.trailingSlash)!==void 0}),m=wt(e.url.pathname),g=(o=X(i,"prerender"))!=null?o:!1;if(g){const w=h.server;if(w!=null&&w.actions)throw new Error("Cannot prerender pages with actions")}else if(n.prerendering)return new Response(void 0,{status:204});n.prerender_default=g;const S=[];if(X(i,"ssr")===!1&&!(n.prerendering&&y))return Ue&&f&&e.request.headers.has("x-sveltekit-action"),await xe({branch:[],fetched:S,page_config:{ssr:!1,csr:(c=X(i,"csr"))!=null?c:!0},status:_,error:null,event:e,options:r,manifest:s,state:n,resolve_opts:a});const j=[];let v=null;const O=i.map((w,C)=>{if(v)throw v;return Promise.resolve().then(async()=>{try{if(w===h&&(f==null?void 0:f.type)==="error")throw f.error;return await Be({event:e,state:n,node:w,parent:async()=>{const R={};for(let P=0;P<C;P+=1){const A=await O[P];A&&Object.assign(R,A.data)}return R}})}catch(R){throw v=R,v}})}),q=(d=X(i,"csr"))!=null?d:!0,I=i.map((w,C)=>{if(v)throw v;return Promise.resolve().then(async()=>{try{return await Ht({event:e,fetched:S,node:w,parent:async()=>{const R={};for(let P=0;P<C;P+=1)Object.assign(R,await I[P]);return R},resolve_opts:a,server_data_promise:O[C],state:n,csr:q})}catch(R){throw v=R,v}})});for(const w of O)w.catch(()=>{});for(const w of I)w.catch(()=>{});for(let w=0;w<i.length;w+=1){const C=i[w];if(C)try{const R=await O[w],P=await I[w];j.push({node:C,server_data:R,data:P})}catch(R){const P=R;if(P instanceof ee){if(n.prerendering&&y){const b=JSON.stringify({type:"redirect",location:P.location});n.prerendering.dependencies.set(m,{response:F(b),body:b})}return Te(P.status,P.location)}const A=we(P),H=await B(e,r,P);for(;w--;)if(t.errors[w]){const b=t.errors[w],T=await s._.nodes[b]();let N=w;for(;!j[N];)N-=1;return await xe({event:e,options:r,manifest:s,state:n,resolve_opts:a,page_config:{ssr:!0,csr:!0},status:A,error:H,branch:rt(j.slice(0,N+1)).concat({node:T,data:null,server_data:null}),fetched:S})}return Oe(r,A,H.message)}else j.push(null)}if(n.prerendering&&y){let{data:w,chunks:C}=Ft(e,r,j.map(R=>R==null?void 0:R.server_data));if(C)for await(const R of C)w+=R;n.prerendering.dependencies.set(m,{response:F(w),body:w})}const z=(l=X(i,"ssr"))!=null?l:!0;return await xe({event:e,options:r,manifest:s,state:n,resolve_opts:a,page_config:{csr:(u=X(i,"csr"))!=null?u:!0,ssr:z},status:_,error:null,branch:z===!1?[]:rt(j),action_result:f,fetched:S})}catch(i){return await Mt({event:e,options:r,manifest:s,state:n,status:500,error:i,resolve_opts:a})}}function Fr(e,t,r){const s={},n=e.slice(1),a=n.filter(c=>c!==void 0);let o=0;for(let c=0;c<t.length;c+=1){const d=t[c];let l=n[c-o];if(d.chained&&d.rest&&o&&(l=n.slice(c-o,c+1).filter(u=>u).join("/"),o=0),l===void 0){d.rest&&(s[d.name]="");continue}if(!d.matcher||r[d.matcher](l)){s[d.name]=l;const u=t[c+1],i=n[c+1];u&&!u.rest&&u.optional&&i&&d.chained&&(o=0),!u&&!i&&Object.keys(s).length===a.length&&(o=0);continue}if(d.optional&&d.chained){o++;continue}return}if(!o)return s}const Gr=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function qe(e){if((e==null?void 0:e.path)===void 0)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function Jr(e,t,r){var i;const s=(i=e.headers.get("cookie"))!=null?i:"",n=Se(s,{decode:h=>h}),a=We(t.pathname,r),o={},c={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},d={get(h,_){const f=o[h];return f&&Pe(t.hostname,f.options.domain)&&Ce(t.pathname,f.options.path)?f.value:Se(s,{decode:_==null?void 0:_.decode})[h]},getAll(h){const _=Se(s,{decode:h==null?void 0:h.decode});for(const f of Object.values(o))Pe(t.hostname,f.options.domain)&&Ce(t.pathname,f.options.path)&&(_[f.name]=f.value);return Object.entries(_).map(([f,y])=>({name:f,value:y}))},set(h,_,f){const y=h.match(Gr);y&&console.warn(`The cookie name "${h}" will be invalid in SvelteKit 3.0 as it contains ${y.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),qe(f),u(h,_,{...c,...f})},delete(h,_){qe(_),d.set(h,"",{..._,maxAge:0})},serialize(h,_,f){qe(f);let y=f.path;return(!f.domain||f.domain===t.hostname)&&(y=Ye(a,y)),Ne(h,_,{...c,...f,path:y})}};function l(h,_){const f={...n};for(const y in o){const m=o[y];if(!Pe(h.hostname,m.options.domain)||!Ce(h.pathname,m.options.path))continue;const g=m.options.encode||encodeURIComponent;f[m.name]=g(m.value)}if(_){const y=Se(_,{decode:m=>m});for(const m in y)f[m]=y[m]}return Object.entries(f).map(([y,m])=>`${y}=${m}`).join("; ")}function u(h,_,f){let y=f.path;(!f.domain||f.domain===t.hostname)&&(y=Ye(a,y)),o[h]={name:h,value:_,options:{...f,path:y}}}return{cookies:d,new_cookies:o,get_cookie_header:l,set_internal:u}}function Pe(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function Ce(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function dt(e,t){for(const r of t){const{name:s,value:n,options:a}=r;if(e.append("set-cookie",Ne(s,n,a)),a.path.endsWith(".html")){const o=wt(a.path);e.append("set-cookie",Ne(s,n,{...a,path:o}))}}}function Br({event:e,options:t,manifest:r,state:s,get_cookie_header:n,set_internal:a}){const o=async(c,d)=>{var h,_;const l=ft(c,d,e.url);let u=(h=c instanceof Request?c.mode:d==null?void 0:d.mode)!=null?h:"cors",i=(_=c instanceof Request?c.credentials:d==null?void 0:d.credentials)!=null?_:"same-origin";return t.hooks.handleFetch({event:e,request:l,fetch:async(f,y)=>{var C,R,P;const m=ft(f,y,e.url),g=new URL(m.url);if(m.headers.has("origin")||m.headers.set("origin",e.url.origin),f!==l&&(u=(C=f instanceof Request?f.mode:y==null?void 0:y.mode)!=null?C:"cors",i=(R=f instanceof Request?f.credentials:y==null?void 0:y.credentials)!=null?R:"same-origin"),(m.method==="GET"||m.method==="HEAD")&&(u==="no-cors"&&g.origin!==e.url.origin||g.origin===e.url.origin)&&m.headers.delete("origin"),g.origin!==e.url.origin){if(`.${g.hostname}`.endsWith(`.${e.url.hostname}`)&&i!=="omit"){const A=n(g,m.headers.get("cookie"));A&&m.headers.set("cookie",A)}return fetch(m)}const S=ne||V,j=decodeURIComponent(g.pathname),v=(j.startsWith(S)?j.slice(S.length):j).slice(1),O=`${v}/index.html`,q=r.assets.has(v)||v in r._.server_assets,I=r.assets.has(O)||O in r._.server_assets;if(q||I){const A=q?v:O;if(s.read){const H=q?r.mimeTypes[v.slice(v.lastIndexOf("."))]:"text/html";return new Response(s.read(A),{headers:H?{"content-type":H}:{}})}else if(Xe&&A in r._.server_assets){const H=r._.server_assets[A],b=r.mimeTypes[A.slice(A.lastIndexOf("."))];return new Response(Xe(A),{headers:{"Content-Length":""+H,"Content-Type":b}})}return await fetch(m)}if(i!=="omit"){const A=n(g,m.headers.get("cookie"));A&&m.headers.set("cookie",A);const H=e.request.headers.get("authorization");H&&!m.headers.has("authorization")&&m.headers.set("authorization",H)}m.headers.has("accept")||m.headers.set("accept","*/*"),m.headers.has("accept-language")||m.headers.set("accept-language",e.request.headers.get("accept-language"));const z=await Gt(m,t,r,{...s,depth:s.depth+1}),w=z.headers.get("set-cookie");if(w)for(const A of et.splitCookiesString(w)){const{name:H,value:b,...T}=et.parseString(A,{decodeValues:!1}),N=(P=T.path)!=null?P:g.pathname.split("/").slice(0,-1).join("/")||"/";a(H,b,{path:N,encode:W=>W,...T})}return z}})};return(c,d)=>{const l=o(c,d);return l.catch(()=>{}),l}}function ft(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}let Re,$e,be;function Vr(e){return Re!=null||(Re=`export const env=${JSON.stringify(yt)}`),$e!=null||($e=`W/${Date.now()}`),be!=null||(be=new Headers({"content-type":"application/javascript; charset=utf-8",etag:$e})),e.headers.get("if-none-match")===$e?new Response(void 0,{status:304,headers:be}):new Response(Re,{headers:be})}function Kr(e){var r,s,n,a;let t={};for(const o of e)!((r=o==null?void 0:o.universal)!=null&&r.config)&&!((s=o==null?void 0:o.server)!=null&&s.config)||(t={...t,...(n=o==null?void 0:o.universal)==null?void 0:n.config,...(a=o==null?void 0:o.server)==null?void 0:a.config});return Object.keys(t).length?t:void 0}const ht=({html:e})=>e,pt=()=>!1,_t=({type:e})=>e==="js"||e==="css",Xr=new Set(["GET","HEAD","POST"]),Qr=new Set(["GET","HEAD","OPTIONS"]);async function Gt(e,t,r,s){var g,S,j,v,O,q,I,z,w,C,R,P,A,H;const n=new URL(e.url);if(t.csrf_check_origin&&bt(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&e.headers.get("origin")!==n.origin){const T=new Ee(403,`Cross-site ${e.method} form submissions are forbidden`);return e.headers.get("accept")==="application/json"?Ge(T.body,{status:T.status}):F(T.body.message,{status:T.status})}if(t.hash_routing&&n.pathname!==V+"/"&&n.pathname!=="/[fallback]")return F("Not found",{status:404});const a=ar(n.pathname);let o;a&&(n.pathname=or(n.pathname)+(n.searchParams.get(at)==="1"?"/":"")||"/",n.searchParams.delete(at),o=(g=n.searchParams.get(nt))==null?void 0:g.split("").map(b=>b==="1"),n.searchParams.delete(nt));let c;try{c=(S=t.hooks.reroute({url:new URL(n)}))!=null?S:n.pathname}catch{return F("Internal Server Error",{status:500})}let d;try{d=ir(c)}catch{return F("Malformed URI",{status:400})}let l=null,u={};if(V&&!((j=s.prerendering)!=null&&j.fallback)){if(!d.startsWith(V))return F("Not found",{status:404});d=d.slice(V.length)||"/"}if(d===`/${t.app_dir}/env.js`)return Vr(e);if(d.startsWith(`/${t.app_dir}`)){const b=new Headers;return b.set("cache-control","public, max-age=0, must-revalidate"),F("Not found",{status:404,headers:b})}if(!((v=s.prerendering)!=null&&v.fallback)){const b=await r._.matchers();for(const T of r._.routes){const N=T.pattern.exec(d);if(!N)continue;const W=Fr(N,T.params,b);if(W){l=T,u=cr(W);break}}}let i;const h={};let _={};const f={cookies:null,fetch:null,getClientAddress:s.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-static does not specify getClientAddress. Please raise an issue")}),locals:{},params:u,platform:s.platform,request:e,route:{id:(O=l==null?void 0:l.id)!=null?O:null},setHeaders:b=>{for(const T in b){const N=T.toLowerCase(),W=b[T];if(N==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(N in h)throw new Error(`"${T}" header is already set`);h[N]=W,s.prerendering&&N==="cache-control"&&(s.prerendering.cache=W)}},url:n,isDataRequest:a,isSubRequest:s.depth>0};let y={transformPageChunk:ht,filterSerializedResponseHeaders:pt,preload:_t};try{if(l){if(n.pathname===V||n.pathname===V+"/")i="always";else if(l.page){const p=await Ie(l.page,r);i=X(p,"trailingSlash")}else l.endpoint&&(i=(await l.endpoint()).trailingSlash);if(!a){const p=We(n.pathname,i!=null?i:"never");if(p!==n.pathname&&!((q=s.prerendering)!=null&&q.fallback))return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(p.startsWith("//")?n.origin+p:p)+(n.search==="?"?"":n.search)}})}if(s.before_handle||(I=s.emulator)!=null&&I.platform){let p={},k=!1;if(l.endpoint){const x=await l.endpoint();p=(z=x.config)!=null?z:p,k=(w=x.prerender)!=null?w:k}else if(l.page){const x=await Ie(l.page,r);p=(C=Kr(x))!=null?C:p,k=(R=X(x,"prerender"))!=null?R:!1}s.before_handle&&s.before_handle(f,p,k),(P=s.emulator)!=null&&P.platform&&(f.platform=await s.emulator.platform({config:p,prerender:k}))}}else(A=s.emulator)!=null&&A.platform&&(f.platform=await s.emulator.platform({config:{},prerender:!!((H=s.prerendering)!=null&&H.fallback)}));const{cookies:b,new_cookies:T,get_cookie_header:N,set_internal:W}=Jr(e,n,i!=null?i:"never");_=T,f.cookies=b,f.fetch=Br({event:f,options:t,manifest:r,state:s,get_cookie_header:N,set_internal:W}),s.prerendering&&!s.prerendering.fallback&&gt(n);const M=await t.hooks.handle({event:f,resolve:(p,k)=>m(p,k).then(x=>{for(const E in h){const U=h[E];x.headers.set(E,U)}return dt(x.headers,Object.values(_)),s.prerendering&&p.route.id!==null&&x.headers.set("x-sveltekit-routeid",encodeURI(p.route.id)),x})});if(M.status===200&&M.headers.has("etag")){let p=e.headers.get("if-none-match");p!=null&&p.startsWith('W/"')&&(p=p.substring(2));const k=M.headers.get("etag");if(p===k){const x=new Headers({etag:k});for(const E of["cache-control","content-location","date","expires","vary","set-cookie"]){const U=M.headers.get(E);U&&x.set(E,U)}return new Response(void 0,{status:304,headers:x})}}if(a&&M.status>=300&&M.status<=308){const p=M.headers.get("location");if(p)return De(new ee(M.status,p))}return M}catch(b){if(b instanceof ee){const T=a?De(b):l!=null&&l.page&&Ot(f)?At(b):Te(b.status,b.location);return dt(T.headers,Object.values(_)),T}return await tt(f,t,b)}async function m(b,T){var N,W,M,p;try{if(T&&(y={transformPageChunk:T.transformPageChunk||ht,filterSerializedResponseHeaders:T.filterSerializedResponseHeaders||pt,preload:T.preload||_t}),t.hash_routing||(N=s.prerendering)!=null&&N.fallback)return await xe({event:b,options:t,manifest:r,state:s,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:y});if(l){const k=b.request.method;let x;if(a)x=await Ir(b,l,t,r,s,o,i!=null?i:"never");else if(l.endpoint&&(!l.page||wr(b)))x=await gr(b,await l.endpoint(),s);else if(l.page)if(Xr.has(k))x=await Mr(b,l.page,t,r,s,y);else{const E=new Set(Qr),U=await r._.nodes[l.page.leaf]();if((W=U==null?void 0:U.server)!=null&&W.actions&&E.add("POST"),k==="OPTIONS")x=new Response(null,{status:204,headers:{allow:Array.from(E.values()).join(", ")}});else{const ue=[...E].reduce((K,G)=>(K[G]=!0,K),{});x=jt(ue,k)}}else throw new Error("This should never happen");if(e.method==="GET"&&l.page&&l.endpoint){const E=(p=(M=x.headers.get("vary"))==null?void 0:M.split(","))==null?void 0:p.map(U=>U.trim().toLowerCase());E!=null&&E.includes("accept")||E!=null&&E.includes("*")||(x=new Response(x.body,{status:x.status,statusText:x.statusText,headers:new Headers(x.headers)}),x.headers.append("Vary","Accept"))}return x}if(s.error&&b.isSubRequest){const k=new Headers(e.headers);return k.set("x-sveltekit-error","true"),await fetch(e,{headers:k})}return s.error?F("Internal Server Error",{status:500}):s.depth===0?await Mt({event:b,options:t,manifest:r,state:s,status:404,error:new se(404,"Not Found",`Not found: ${b.url.pathname}`),resolve_opts:y}):s.prerendering?F("not found",{status:404}):await fetch(e)}catch(k){return await tt(b,t,k)}finally{b.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},b.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function Yr(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([s])=>s.startsWith(r)&&(t===""||!s.startsWith(t))))}function Zr(e,{public_prefix:t,private_prefix:r}){return Object.fromEntries(Object.entries(e).filter(([s])=>s.startsWith(t)&&(r===""||!s.startsWith(r))))}const mt={get({type:e},t){throw new Error(`Cannot read values from $env/dynamic/${e} while prerendering (attempted to read env.${t.toString()}). Use $env/static/${e} instead`)}};let He;var re,ve;class us{constructor(t){L(this,re);L(this,ve);D(this,re,Yt),D(this,ve,t)}async init({env:t,read:r}){const s={public_prefix:$(this,re).env_public_prefix,private_prefix:$(this,re).env_private_prefix},n=Yr(t,s),a=Zr(t,s);Zt(Qe?new Proxy({type:"private"},mt):n),er(Qe?new Proxy({type:"public"},mt):a),rr(a),r&&sr(r),await(He!=null?He:He=(async()=>{try{const o=await tr();$(this,re).hooks={handle:o.handle||(({event:c,resolve:d})=>d(c)),handleError:o.handleError||(({error:c})=>console.error(c)),handleFetch:o.handleFetch||(({request:c,fetch:d})=>d(c)),reroute:o.reroute||(()=>{}),transport:o.transport||{}},o.init&&await o.init()}catch(o){throw o}})())}async respond(t,r){return Gt(t,$(this,re),$(this,ve),{...r,error:!1,depth:0})}}re=new WeakMap,ve=new WeakMap;export{us as Server};
